class Comment{constructor(e=null){null!==e&&(this.deleteButton=e,this.deleteComment=this.deleteComment.bind(this),this.deleteButton.addEventListener("click",()=>this.deleteComment(e))),this.addComment=this.addComment.bind(this)}addComment(e){let t=e.target,o=t.value;if(!o)return;let n=t.closest(".tasks-table__tooltip"),s=n.querySelector(".reviews"),l=document.querySelector("#comment");l.content.querySelector(".reviews__content").innerText=o;const i=document.importNode(l.content,!0);if(s)s.appendChild(i);else{console.log("adding first comment");let e=document.createElement("ul");e.className="reviews",e.appendChild(i),n.insertBefore(e,t)}new Comment(n.querySelector("li:last-child .reviews__delete-button")),t.value=""}deleteComment(e){console.log("delete comment");let t=e.parentNode,o=t.parentNode;1!==o.childNodes.length?t.remove():o.remove()}}!function(){class e{constructor(e){this.button=e,this.handleKeyAction=this.handleKeyAction.bind(this),this.showTooltip=this.showTooltip.bind(this),e.addEventListener("click",()=>this.showTooltip(e))}showTooltip(e){let t=document.querySelector("#add-comment-tooltip"),o=e.parentElement;if(null!==o.querySelector(".tasks-table__tooltip"))return;let n=document.importNode(t.content,!0);const s=n.querySelector(".tasks-table__tooltip-input");if(o.appendChild(n),this.tooltip=s.parentNode,e.classList.contains("tasks-table__comment-button--commented")){let e=document.querySelector("#comments-list");const t=document.importNode(e.content,!0);s.parentNode.insertBefore(t,s),document.querySelectorAll(".reviews__delete-button").forEach(e=>{new Comment(e)})}s.focus(),e.classList.add("tasks-table__comment-button--pressed"),document.addEventListener("keydown",this.handleKeyAction)}handleKeyAction(e){"Escape"===e.key?(document.removeEventListener("keydown",this.handleKeyAction),this.tooltip.parentNode.removeChild(this.tooltip),this.button.classList.remove("tasks-table__comment-button--pressed")):"Enter"===e.key&&(console.log("enter presses"),(new Comment).addComment(e))}}document.querySelectorAll(".tasks-table__comment-button").forEach(t=>{new e(t)})}(),function(){new class{constructor(){this.button=document.querySelector(".navigation__toggle-button"),this.list=document.querySelector(".navigation__list"),this.button.addEventListener("click",this.toggle.bind(this))}toggle(){this.list.classList.toggle("navigation__list--open")}}}();